<p id="notice"><%= notice %></p>

<h4 style="color: orange">Список рабочих мест</h4>
<%= link_to 'Новое рабочее место', new_work_space_path, :class => 'btn btn-success btn-sm' %>
<br>
<br>
<table class=" table table-striped table-hover">
    <th>ID</th>
    <th>Наименование</th>
    <th>Код</th>
    <th>Короткое имя</th>
    <th>Подразделение</th>
    <th>Активно</th>
    <th>Связанные АРМ</th>
    <th>Виды нарушения</th>
    <th>Схема смен</th>
    <th>Действия</th>
    <% @work_spaces.each do |work_space| %>
        <tr>
            <td><%= work_space.id %></td>
            <td><%= work_space.name %></td>
            <td><%= work_space.code %></td>
            <td><%= work_space.short_name %></td>
            <td><%= work_space.subdivision.name %></td>
            <td>
                <% if work_space.is_used? %>
                    <span class="glyphicon glyphicon-ok"></span>
                <% else %>
                    <span class="glyphicon glyphicon-off"></span>
                <% end %>
            </td>
            <td>
                <% if work_space.auto_work_spaces.empty? %>
                    <span class="glyphicon glyphicon-unchecked"></span>
                <% else %>
                    <span class="glyphicon glyphicon-ok"></span>
                <% end %>
            </td>


            <td>
                <ul>
                    <% work_space.issue_types.each do |i| %>
                        <li>
                            <%= i.name %><br>
                        </li>
                    <% end %>
                </ul>
            </td>
            <td>
                <% unless work_space.turn_scheme.nil? %>
                   <%= work_space.turn_scheme.name %>
                
                <% end %>
            </td>
            <td><%= link_to '', edit_work_space_path(work_space), :class => 'btn glyphicon glyphicon-edit btn-primary  btn-sm' %>
                <% if work_space.is_used? %>
                    <%= link_to '', work_space, method: :delete, data: {confirm: 'Вы действительно хотите сделать недостуным данное рабочее место. Все существующие привязки будут сохранены. В дальнейшем вы сможете задействовать рабочее место '}, :class => 'btn glyphicon glyphicon-off btn-danger  btn-sm' %>
                <% else %>
                    <%= link_to('', enable_work_space_path(work_space),method: :patch,  :class => 'btn glyphicon glyphicon-ok btn-success  btn-sm')%>
                <% end %>

            </td>

        </tr>
    <% end %>

</table>

<br>
<script type="text/javascript">
    $('#workspaces').addClass('active');
</script>

